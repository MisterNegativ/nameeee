var mainMenu=$(".main-menu").clone(),headerNets=$(".header .social-nets").clone(),headerClonesWrap=$(".main-categories__list-wrap"),toTop=$(".to-top"),bp={mobile:575,tablet:1023},smartSpeedMS=800,currentPathName=window.location.pathname,_validImageExtensions=[".jpg",".jpeg",".png"];function toggleBlogSubCats(){$(".blog-categories-list > li > a").click((function(e){const t=$(this).next("ul");t.length&&(e.preventDefault(),t.slideToggle("fast"),$(this).toggleClass("active"))})),$(".blog-categories-list__toggle a").click((function(e){e.preventDefault();var t=$(this).is(".active");$(this).toggleClass("active"),$(".blog-categories-list ul").each((function(){t?$(this).slideUp("fast").prev("a").removeClass("active"):$(this).slideDown("fast").prev("a").addClass("active")}))}))}function selectMakeupColor(){$(".makeup-table td").each((function(){var e=$(this).parents(".tab-pane").find(".hair-colors-table").find("tr:first").find("td");e.length&&$(this).find("td").click((function(){var t=getBackgroundColor(this);e.css("background-color",t)}))}))}function selectHairColor(){$(".hair-colors-table").each((function(){var e=$(this),t=$(this).find("table td");if(t.length){var o=e.find(">tbody>tr:first").find("td");o.length&&$(t).click((function(){var e=getBackgroundColor(this);o.css("background-color",e)}))}}))}function selectTestPalette(){$(".color-table").each((function(){var e=$(this).parents().find(".result-img");e.length&&$(this).find("td").click((function(){var t=getBackgroundColor(this);e.css("border-color",t)}))}))}function getBackgroundColor(e){return(window.getComputedStyle?window.getComputedStyle(e,null):e.currentStyle).backgroundColor}function initSliderTable(){$(".slider-table").each((function(){$(this).addClass("d-none");var e=$(this).find(">tbody>tr"),t=0,o=[],i=2;for(window.innerWidth<=bp.tablet&&(i=1);t<e.length;)o.push(e.slice(t,t+i)),t+=i;var a=document.createElement("div");a.classList.add("result-card-carousel"),a.classList.add("owl-carousel"),a.classList.add("owl-theme"),$(o).each((function(){var e=document.createElement("div");$(this).find(">td").each((function(){$(e).append($(this).html())})),$(a).append(e)})),$(this).after(a),setTimeout((function(){$(".result-card-carousel").owlCarousel({margin:5,items:1,dots:!0,nav:!0,smartSpeed:smartSpeedMS})}),100)}))}function wigCarouselInit(){$(".wig-list").owlCarousel({margin:20,items:1,dots:!0,nav:!0,smartSpeed:smartSpeedMS,responsive:{0:{items:3},768:{items:5}}})}function toggleAuthDropdown(){$(".auth-img").on("click",(function(e){window.innerWidth<=bp.mobile&&(e.preventDefault(),$(this).next("div").toggleClass("active"))}))}function homeClassName(){"/"===currentPathName&&$("body").addClass("home-page")}function voteRating(){$(".vote-rating").find(">span").hover((function(){if(!$(this).parents(".vote-rating").is(".__isVoted")){var e=$(this).index(),t=$(this).parent().children();t.removeClass("hover");for(var o=0;o<=e;o++)$(t[o]).addClass("hover")}}),(function(){$(this).parents(".vote-rating").children().removeClass("hover")}))}function showPasswordFn(){$(document).on("click",".show-password",(function(e){if(e.preventDefault(),$(this).is(".active")){t=$(this).parents(".form-group").find("input");$(this).removeClass("active"),t.prop("type","password")}else{var t;(t=$(this).parents(".form-group").find("input")).prop("type","text"),$(this).addClass("active")}}))}function goToTop(){toTop.on("click",(function(e){e.preventDefault(),$("html, body").stop().animate({scrollTop:0},500,"swing")}))}function showToTopBtn(){var e=window.innerHeight;window.pageYOffset>e?toTop.addClass("active"):toTop.removeClass("active")}function toggleFooterNav(){$(".footer-nav ul").find("ul").each((function(){var e=$(this).prev("a");e.length&&e.on("click",(function(e){window.innerWidth<=bp.mobile&&(e.preventDefault(),$(this).next("ul").slideToggle("fast"),$(this).toggleClass("active"))}))}))}function cloneMobBlocks(){var e=window.innerWidth,t=headerClonesWrap.find(".main-menu");e<=bp.mobile&&!t.length?headerClonesWrap.append([headerNets,mainMenu]):e>bp.mobile&&(headerClonesWrap.find(".main-menu").remove(),headerClonesWrap.find(".social-nets").remove())}function toggleSubcats(){$(".main-categories__list").find("ul").each((function(){var e=$(this).prev("a");e.on("click",(function(t){e.toggleClass("active"),window.innerWidth<bp.tablet&&(t.preventDefault(),e.next("ul").slideToggle("fast"))}))}))}function toggleMenu(){var e=$(".main-categories__list-wrap");$(".ham1").on("click",(function(){$(this).toggleClass("active"),e.toggleClass("active").slideToggle(250)}))}function fixedHeader(){var e=document.querySelector(".main-categories"),t=!1,o=0,i=$(e).offset().top;window.addEventListener("scroll",(function(){var a=window.pageYOffset;i<=a?($(e).prev().css("margin-bottom",e.offsetHeight),e.classList.add("fixed"),o>a?e.classList.add("fixed-show"):e.classList.remove("fixed-show"),t=!0):t&&i>a&&($(e).prev().css("margin-bottom",0),e.classList.remove("fixed"),e.classList.remove("fixed-show"),t=!1),o=a}))}function initMyServicesSlider(){$(".my-services.owl-carousel").each((function(){$(this).owlCarousel({margin:20,items:1,dots:!0,nav:!0,autoWidth:!0,smartSpeed:smartSpeedMS,autoHeight:!1,autoplay:!1,responsive:{0:{items:1},576:{items:2},768:{items:3},992:{items:4},1024:{items:3},1280:{items:4}}})}))}function dynamicPostImgsMobCarouse(){window.innerWidth<=bp.mobile?$(".dyn-mob-carousel").length||$(".post-imgs-list-table").each((function(){var e=document.createElement("div");e.classList.add("dyn-mob-carousel"),e.classList.add("owl-carousel"),e.classList.add("owl-theme"),$(this).find("img").each((function(){var t=document.createElement("div"),o=$(this).clone();$(t).append(o),$(e).append(t)})),$(this).after(e),setTimeout((function(){$(".dyn-mob-carousel").owlCarousel({margin:0,items:1,dots:!0,nav:!1,smartSpeed:smartSpeedMS})}),100)})):$(".dyn-mob-carousel").remove()}function mobCarouselPosts(){window.innerWidth<=bp.mobile&&($(".mob-carousel-posts.owl-carousel").length||($(".mob-carousel-posts").addClass(["owl-carousel","owl-theme"]),setTimeout((function(){$(".mob-carousel-posts").owlCarousel({margin:0,items:1,dots:!0,nav:!1,smartSpeed:smartSpeedMS})}),100)))}function listCarousel(){$(".list-owl-carousel").owlCarousel({margin:0,items:1,dots:!0,nav:!0,smartSpeed:smartSpeedMS})}function previewFullPhoto(e,t){if(e.files&&e.files[0]){var o=new FileReader;o.onload=function(e){t.src=e.target.result},o.readAsDataURL(e.files[0])}}function initDressesVerticalCarousel(){$("#dresses>div").jCarouselLite({btnNext:".next-dress",btnPrev:".prev-dress",vertical:!0,visible:4,circular:!1})}function initClothesVerticalSlider(e){$(".dresses__inner").each((function(){$(this).owlCarousel({margin:40,items:1,dots:!1,nav:!0,autoWidth:!1,smartSpeed:smartSpeedMS,autoHeight:!1,autoplay:!1})}))}function resizeableElSelect(){$(document).on("click",".resizeable-img",(function(e){e.preventDefault();var t=$(".wardrobe-body__inner");if(t.is(".photo-uploaded")){$(this).is(".not-paid");var o=$(this).data("dest"),i=$(this).data("activate"),a=$(this).data("resizecont"),s=$(this).data("full"),n=$(o);$(this).parents(".resizeable-imgs").find(".active").removeClass("active"),$(this).addClass("active"),$(a).removeAttr("style"),n.prop("src",s),t.addClass(i)}else alert("Загрузите сначала свое фото пожалуйста")}))}function accessoriesSlider(){$(".accessory-carousel").owlCarousel({margin:20,items:2,dots:!0,nav:!1,smartSpeed:500,autoHeight:!1,autoplay:!1,responsive:{0:{items:2},576:{items:3}}})}function removeImg(){$(document).on("click",".remove-img",(function(e){e.preventDefault(),e.stopPropagation();var t=$(this).data("target"),o=$(this).data("diactivate"),i=$(".wardrobe-body__inner"),a=$(this).data("input"),s=$(this).parents(".resizable");$(this).parent().is(".active")&&$(this).parent().removeClass("active"),s.prop("style",""),s.removeAttr("data-x"),s.removeAttr("data-y"),i.removeClass(o),$(t).prop("src",""),a&&$(a).val("")}))}function initResizeDrag(){interact(".resize-drag").resizable({edges:{top:".resize-top",left:".resize-left",bottom:".resize-bottom",right:".resize-right"},listeners:{move(e){if(!Object.values(e.target.classList).includes("locked")){var t=e.target,o=parseFloat(t.getAttribute("data-x"))||0,i=parseFloat(t.getAttribute("data-y"))||0;t.style.width=e.rect.width+"px",t.style.height=e.rect.height+"px",o+=e.deltaRect.left,i+=e.deltaRect.top,t.style.webkitTransform=t.style.transform="translate("+o+"px,"+i+"px)",t.setAttribute("data-x",o),t.setAttribute("data-y",i)}}},modifiers:[interact.modifiers.restrictEdges({outer:"parent"}),interact.modifiers.restrictSize({min:{width:10,height:5}})],inertia:!0}).draggable({listeners:{move:window.dragMoveListener},inertia:!0,modifiers:[interact.modifiers.restrictRect({restriction:"parent",endOnly:!0})]})}function dragMoveListener(e){var t=e.target;if(!Object.values(t.classList).includes("locked")){var o=(parseFloat(t.getAttribute("data-x"))||0)+e.dx,i=(parseFloat(t.getAttribute("data-y"))||0)+e.dy;t.style.webkitTransform=t.style.transform="translate("+o+"px, "+i+"px)",t.setAttribute("data-x",o),t.setAttribute("data-y",i)}}function validateFile(e){if("file"==e.type){var t=e.value;if(t.length>0){for(var o=!1,i=0;i<_validImageExtensions.length;i++){var a=_validImageExtensions[i];if(t.substr(t.length-a.length,a.length).toLowerCase()==a.toLowerCase()){o=!0;break}}if(!o)return alert("Допустимые файлы для загрузки: "+_validImageExtensions.join(", ")),!1}}return!0}function imitateClick(){$(document).on("click",".click-another-btn",(function(e){e.preventDefault();const t=$(this).data("target");$(t).click()}))}function initBSTooltip(){$('[data-toggle="tooltip"]').tooltip()}function uploadCollageImage(){const e=$(".collage-uploaded-images");$("#collage-img-upload-input").on("change",(function(t){if($(this).val()&&validateFileSize(this)){$(".collage-body").is(".collages-uploaded")||$(".collage-body").addClass("collages-uploaded");const t=$("#collageImgTemp").clone();t.removeClass("d-none"),t.removeClass("active"),t.removeClass("locked"),t.removeAttr("style"),e.append(t);const o=$(".collage-uploaded-images").find(".collage-img:last-child").find("img");o.length&&previewFullPhoto(this,o[0])}})),$(".collage-catalog").on("click",".collage-catalog__item",(function(t){if(!$(this).is(".__ad-block")){t.preventDefault(),console.log("ad item to collage");const o=$(this).find("img").data("full");if(!o)return;$(".collage-body").is(".collages-uploaded")||$(".collage-body").addClass("collages-uploaded");const i=$("#collageImgTemp").clone();i.removeClass("d-none"),i.removeClass("active"),i.removeClass("locked"),i.removeAttr("style"),i.find("img").attr("src",o),e.append(i)}}))}function initSelectCollageImage(){$(".collage-uploaded-images").on("click",".collage-img",(function(){$(this).is(".active")||($(this).addClass("active"),$(this).parent().find(".collage-img").not($(this)).removeClass("active")),$(this).is(".locked")?$(".lock-btn").addClass("active"):$(".lock-btn").removeClass("active")}))}function layerManage(){const e=["down","up","delete","lock","unlock","delete"];let t=0;$(".manage-collage-img").on("click",(function(o){o.preventDefault();const i=$(this).data("action");if(e.includes(i)){const e=$(".collage-uploaded-images").find(".collage-img.active");if(e.length)switch(i){case"down":t>=1&&t--,e.css("z-index",t),layerDown(e);break;case"up":t++,console.log(t),e.css("z-index",t),layerUp(e);break;case"lock":$(this).toggleClass("active"),layerLock(e);break;case"delete":layerDelete(e)}}}))}function layerDown(e){console.log(e)}function layerUp(e){}function layerDelete(e){e.fadeOut("fast",(function(){$(this).remove()}))}function layerLock(e){e.toggleClass("locked")}function layerUnlock(e){}function isTouchDevice(){return 1==("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}function validateFileSize(e,t=5){return!(e.files[0].size/1024/1024>t)||(alert("Размер файла не должен превышать "+t+" мегабайта"),!1)}function zoomCollage(){$(".collages-list").on("click",".collage-item",(function(e){const t=$(this).find(".collage-uploaded-images").clone();$("#collage-zoomed-body").html(t),$("#collage-zoomed").modal("show")}))}function zoomStyle(){$(".styles-list").on("click",".style-item",(function(e){const t=$(this).find(".wardrobe-body__inner").clone();$("#style-zoomed-body").html(t),$("#style-zoomed-body .wardrobe-body__inner").append('<img class="wardrobe-watermark" src="/images/logo-new-1.png">'),$("#style-zoomed").modal("show")}))}window.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("preloader");e&&setTimeout((function(){e.remove()}),300)})),$(document).ready((function(){toggleMenu(),fixedHeader(),toggleSubcats(),cloneMobBlocks(),toggleFooterNav(),showToTopBtn(),goToTop(),showPasswordFn(),voteRating(),initMyServicesSlider(),homeClassName(),toggleAuthDropdown(),dynamicPostImgsMobCarouse(),mobCarouselPosts(),initSliderTable(),wigCarouselInit(),selectTestPalette(),selectMakeupColor(),selectHairColor(),toggleBlogSubCats(),initResizeDrag(),imitateClick(),!1===isTouchDevice()&&initBSTooltip(),uploadCollageImage(),initSelectCollageImage(),layerManage(),initDressesVerticalCarousel(),initClothesVerticalSlider($(".clothes-slider.__women>div")),resizeableElSelect(),$(window).resize((function(){cloneMobBlocks(),dynamicPostImgsMobCarouse()})),$(window).scroll((function(){showToTopBtn()})),$("#wardrobe-upload input").change((function(){validateFile(this)&&validateFileSize(this)&&($(".wardrobe-body__inner").addClass("photo-uploaded"),previewFullPhoto(this,document.getElementById("preview-photo")))})),$("#dresses").carousel(),accessoriesSlider(),removeImg(),zoomCollage(),zoomStyle();$(".clothes-style-tab a").on("shown.bs.tab",(function(e){const t=$(this).data("addclass"),o=$(this).data("removeclass");$(".wardrobe-body__inner").addClass(t).removeClass(o);var i=$(e.target).attr("href"),a=$(i).find(".clothes-slider.__men>div");a.length&&setTimeout(()=>{initClothesVerticalSlider(a)},100)})),listCarousel(),$(".faq-block__list h4").click((function(){$(this).nextAll().slideToggle("fast"),$(this).toggleClass("active")}))})),window.dragMoveListener=dragMoveListener;